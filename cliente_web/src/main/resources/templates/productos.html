<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <title>Productos | Portal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fb;
            color: #1e3d58;
        }
        .navbar {
            background-color: #1e3d58;
        }
        .navbar-brand {
            color: #ffffff !important;
            font-weight: 600;
        }
        .btn-primary {
            background-color: #2e5984;
            border-color: #2e5984;
        }
        .btn-primary:hover {
            background-color: #254a6e;
            border-color: #254a6e;
        }
        .card {
            border: none;
            box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
        }
        footer {
            background-color: #ffffff;
            border-top: 1px solid #dee2e6;
        }
    </style>
</head>
<body class="d-flex flex-column min-vh-100">

<!-- Navbar -->
<nav class="navbar navbar-expand-lg shadow-sm">
    <div class="container">
        <a class="navbar-brand" th:href="@{/}">Portal de Productos</a>
    </div>
</nav>

<!-- Contenido -->
<main class="container py-5 flex-fill">
    <div class="row justify-content-center">
        <div class="col-lg-10">

            <!-- Buscador -->
            <div class="card mb-4">
                <div class="card-body">
                    <h5 class="card-title mb-3">Buscar producto por ID</h5>
                    <form th:action="@{/productos/buscar}" method="post" class="row g-2">
                        <div class="col-sm-4">
                            <input type="number" name="id" class="form-control" placeholder="Ingrese ID de producto" required>
                        </div>
                        <div class="col-auto">
                            <button type="submit" class="btn btn-primary">Buscar</button>
                        </div>
                    </form>

                    <div th:if="${error}" class="alert alert-danger mt-3" th:text="${error}"></div>

                    <div th:if="${resultado}" class="alert alert-success mt-3">
                        <h6 class="fw-bold mb-2">Resultado</h6>
                        <ul class="mb-0">
                            <li><b>ID:</b> <span th:text="${resultado.id}"></span></li>
                            <li><b>Nombre:</b> <span th:text="${resultado.productName}"></span></li>
                            <li><b>Unit:</b> <span th:text="${resultado.unit}"></span></li>
                            <li><b>Precio:</b> S/. <span th:text="${resultado.price}"></span></li>
                            <li><b>Categoría:</b> <span th:text="${resultado.category?.categoryName} ?: '-'"></span></li>
                            <li><b>Proveedor:</b> <span th:text="${resultado.supplier?.supplierName} ?: '-'"></span></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Tabla -->
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title mb-3">Catálogo de productos</h5>
                    <div class="table-responsive">
                        <table class="table table-hover align-middle">
                            <thead class="table-light">
                            <tr>
                                <th>ID</th>
                                <th>Nombre</th>
                                <th>Unit</th>
                                <th>Precio</th>
                                <th>Categoría</th>
                                <th>Proveedor</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="p : ${productos}">
                                <td th:text="${p.id}"></td>
                                <td th:text="${p.productName}"></td>
                                <td th:text="${p.unit}"></td>
                                <td>S/. <span th:text="${p.price}"></span></td>
                                <td th:text="${p.category?.categoryName} ?: '-'"></td>
                                <td th:text="${p.supplier?.supplierName} ?: '-'"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        </div>
    </div>
</main>

<!-- Footer -->
<footer class="text-center py-3 mt-auto">
    <p class="mb-0 text-secondary small">© 2025 Portal de Productos | Todos los derechos reservados</p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
